# Этап 1: Базовая аутентификация с использованием Cookies
**Цель:** Реализовать механизм аутентификации пользователя с сохранением
идентификатора пользователя (user_id) в cookie. После успешной аутентификации
пользователь должен иметь доступ к странице профиля, где отображается его
персональная информация.
## Задачи:
**1. Экшен аутентификации (POST /login):**
- При успешной проверке учетных данных (логин/пароль) сервер должен:
- Сгенерировать cookie с именем user.
- В качестве значения cookie установить идентификатор
пользователя (user_id), полученный из базы данных.
- Отправить cookie в ответе клиенту.
**2. Экшен профиля (GET /profile):**
- Реализовать следующую логику обработки запроса:
- Извлечь значение cookie user (содержащее user_id).
- Найти пользователя в базе данных по полученному user_id.
- Сформировать и отправить ответ, содержащий информацию о
пользователе (например, имя, фамилия, дата регистрации).
Результат этапа: Рабочий механизм аутентификации, при котором авторизованный
пользователь может просматривать свою персональную информацию на странице
профиля.

# Этап 2: Усовершенствованная аутентификация с использованием сессий
**Цель:** Повысить безопасность системы аутентификации, заменив хранение user_id в
cookie на механизм сессий с использованием уникального токена.
## Задачи:
**1. Модификация структуры базы данных:**
- Добавить таблицу sessions, поля для примера:
- id (первичный ключ)
- user_id (внешний ключ, ссылается на таблицу пользователей)
- session_hash (уникальный строковый токен сессии)
- created_at (временная метка создания сессии)
- expires_at (временная метка истечения срока действия сессии,
опционально)
**2. Генерация токена сессии:**
- Найти или реализовать криптостойкую функцию для генерации
случайной строки (токена) длиной не менее 32 символов. Рекомендуется
использовать библиотечные функции (например, secrets в Python, crypto в
Node.js).
**3. Модификация экшена аутентификации (POST /login):**
- При успешной аутентификации:
- Сгенерировать уникальный токен сессии (session_hash) с помощью
криптостойкой функции.
- Записать новую запись в таблицу sessions, связав session_hash с
user_id аутентифицированного пользователя.
- Установить в cookie (например, с именем session_token) значение
session_hash.
- Отправить cookie в ответе клиенту.
**4. Модификация экшена профиля (GET /profile):**
- Обновить логику обработки запроса:
- Извлечь значение cookie session_token.
- Найти запись в таблице sessions по значению session_hash, равному
полученному токену.
- Если запись найдена и сессия действительна (не истек срок
действия), получить user_id из найденной записи.
- Найти пользователя в базе данных по user_id.
- Сформировать и отправить ответ с информацией о пользователе.
- Если сессия не найдена или недействительна, вернуть ответ с
кодом ошибки 401 (Unauthorized).
